{% extends '@KibaticCms/layout.html.twig' %}

{% block content %}
    <div id="cms_blocks">
        <header>
            <h1>CMS Blocks</h1>

            <div>
                {% for blockTypeName in blockTypeNames %}
                    <a href="{{ path('cms_block_new', {'typeName': blockTypeName}) }}" class="btn btn-outline-secondary">
                        ‚ûï {{ blockTypeName|capitalize }}
                    </a>
                {% endfor %}

                {% set debug = app.session.get('cms-debug', false) %}
                <a href="{{ path('cms_block_debug') }}" class="btn btn-outline-{{ debug ? 'success' : 'danger' }}">
                    üêõ Debug : {% if debug %}on{% else %}off{% endif %}
                </a>
            </div>
        </header>

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Slug</th>
                    <th>Type</th>
                    <th>Created at</th>
                    <th>Updated at</th>
                </tr>
            </thead>
            <tbody>
            {% for block in blocks %}
                <tr>
                    <td><a href="{{ path('cms_block_edit', { 'id': block.id }) }}">{{ block.slug }}</a></td>
                    <td>{{ block.type }}</td>
                    <td>{{ block.createdAt|date('Y-m-d') }}</td>
                    <td>{{ block.updatedAt|date('Y-m-d') }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

        {{ cms_block_i18n('mentions-legales') }}
    </div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}

    {% include '@KibaticCms/_css.html.twig' %}
{% endblock %}
